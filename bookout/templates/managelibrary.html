{% extends "maintemplate.html" %}

{% block title %}Library{% endblock %}

{% block style %}

<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/jquery-ui-1.10.2.custom.min.css') }}" />

{% endblock %}

{% block content %}

<script type="text/javascript">
	function remove_book(bookOLKey){
		$.ajax({
			url:"/library/" + bookOLKey,
			type: 'DELETE',
			success:function(data) {
				alert(data);
				location.reload();
			}
		});
	}

	$(function(){
		var counter = $("#book_qty").spinner();
	})
</script>

<br>
<div class="row">
  <div class="span12">
    <div class="tabbable">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#MyBooks" data-toggle="tab">My Books</a></li>
        <li><a href="#LendedBooks" data-toggle="tab">Lended Books</a></li>
        <li><a href="#BorrowedBooks" data-toggle="tab">Borrowed Books</a></li>
      </ul>
    </div>
      <div class="tab-content">
        <div class="tab-pane active" id="MyBooks">
          <h3 style="margin-top:-4px">Books I Own</h3>
          <table class="table table-striped table-bordered">
            <tr>
              <th>Book Title</th>
              <th>Author</th>
              <th style="text-align:center">Copies</th>
              <th></th>
            </tr>
            {% if myBooks == [] %}
              <tr>
                <td colspan="4">You haven't added any books to your library yet. To add books, search for the title, author, or ISBN in the search bar in the header. Once you've added books, they'll show up here.</td>
            {% endif %}
            {% for book in myBooks %}
              <tr>
                <td><a href="/book/{{book.OLKey}}">{{book.title}}</a></td>
                <td>{{book.author}}</td>
                <td style="text-align:center"><input id="book_qty" style="width:1.5em;" value="1"/></td>
                <td style="text-align:center"><a class="btn btn-danger btn-small" href="#" onclick="remove_book('{{book.OLKey}}')">Remove</a></td>
              </tr>
            {% endfor %}
          </table>

        </div>
        <div class="tab-pane" id="LendedBooks">

          <h3 style="margin-top:-4px">Books I'm Lending</h3>
          <table class="table table-striped table-bordered">
            <tr>
              <th>Book Title</th>
              <th>Author</th>
              <th>Number of Copies</th>
              <th></th>
            </tr>
            {% if lendedBooks == [] %}
              <tr>
                <td colspan="4">You don't currently have any books on loan. When you do, they'll show up here.</td>
            {% endif %}
            {% for book in lendedBooks %}
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            {% endfor %}
          </table>

        </div>
        <div class="tab-pane" id="BorrowedBooks">
          <h3 style="margin-top:-4px">Books I'm Borrowing</h3>
          <table class="table table-striped table-bordered">
            <tr>
              <th>Book Title</th>
              <th>Author</th>
              <th>Number of Copies</th>
              <th></th>
            </tr>
            {% if BorrowedBooks == [] %}
              <tr>
                <td colspan="4">You aren't currently borrowing any books. To borrow a book, search for the title or author in the search bar in the header. When you're borrowing books, they'll show up here.</td>
            {% endif %}
            {% for book in borrowedBooks %}
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            {% endfor %}
          </table>

        </div>
      </div>
    </span>
</div>

<script type="text/javascript" src="{{ url_for('static', filename='js/jquery-ui-1.10.2.custom.min.js') }}"></script>

{% endblock %}
