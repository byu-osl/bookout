{% extends "maintemplate.html" %}

{% block title %}Library{% endblock %}

{% block content %}

<script type="text/javascript">
	function remove_book(bookOLKey){
		$.ajax({
			url:"/library/" + bookOLKey,
			type: 'DELETE',
			success:function(data) {
				alert(data);
				location.reload();
			}
		});
	}
</script>

<div class="row">
	<div class="span12">
	
		<h3>Library</h3>
	
	</div>
</div>

<div class="row">
  <div class="span12">
    <div class="tabbable">
      <ul class="nav nav-tabs">
        <li class="active"><a href="#MyBooks" data-toggle="tab">My Books</a></li>
        <li><a href="#LendedBooks" data-toggle="tab">Lended Books</a></li>
        <li><a href="#BorrowedBooks" data-toggle="tab">Borrowed Books</a></li>
      </ul>
    </div>
      <div class="tab-content">
        <div class="tab-pane active" id="MyBooks">

          <h4>My books</h4>
          <table class="table table-bordered table-striped">
            <tr>
              <th></th>
              <th>Book title</th>
              <th>Author</th>
              <th>Open Libary ID</th>
              <th></th>
            </tr>
            {% for book in myBooks %}
              <tr>
              	<td><a class="btn" href="#" onclick="remove_book('{{book.OLKey}}')">-</a></td>
                <td>{{book.title}}</td>
                <td>{{book.author}}</td>
                <td>{{book.OLKey}}</td>
                <td><a class="btn" href="/bookinfo">Details</a></td>
              </tr>
            {% endfor %}
          </table>

        </div>
        <div class="tab-pane" id="LendedBooks">

          <h4>Lended books</h4>
          <table class="table table-bordered table-striped">
            <tr>
              <th>Title</th>
              <th>Author</th>
              <th>Open Libary ID</th>
              <th></th>
            </tr>
            {% for book in lendedBooks %}
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            {% endfor %}
          </table>

        </div>
        <div class="tab-pane" id="BorrowedBooks">

          <h4>Borrowed books</h4>
          <table class="table table-bordered table-striped">
            <tr>
              <th>Title</th>
              <th>Author</th>
              <th>Open Libary ID</th>
              <th></th>
            </tr>
            {% for book in borrowedBooks %}
            <tr>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            {% endfor %}
          </table>

        </div>
      </div>
    </span>
</div>

{% endblock %}
